<!DOCTYPE html>
<html>

<head>
    <title>Tutorial 1: Getting Started</title>
    <script src="cytoscape.js"></script>
</head>

<style>
    #cy {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;
    }
</style>

<body>
    <div id="cy"></div>
    <script>

        var url = "http://localhost:52446/api/pathes/";
        var request = new XMLHttpRequest();  
        var response = null;
        request.open("GET", url);      
        request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
                response = JSON.parse(request.responseText);
                f();
            }
        }
        request.send();
        
        var f = function () {
            var cy = cytoscape({
                container: document.getElementById('cy'),
                style: [
                    {
                        selector: 'node',
                        style: {
                            shape: 'hexagon',
                            'background-color': 'red',
                            label: 'data(id)'
                        }
                    }]
            });
            for (var i = 0; i < response.vertexes.length; i++) {
                cy.add({
                    data: { id: response.vertexes[i] }
                }
                );
            }
            for (var i = 0; i < response.edges.length; i++) {
                cy.add({
                    data: {
                        id: response.edges[i].source + response.edges[i].target,
                        source: response.edges[i].source,
                        target: response.edges[i].target
                    }
                });
            }

            var layout = cy.layout({ name: 'grid' });

            layout.run();
        }


    </script>
</body>
</html>